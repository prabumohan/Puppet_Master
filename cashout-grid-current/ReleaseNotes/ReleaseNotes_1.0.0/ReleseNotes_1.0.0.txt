CashOut Grid Project

 ################################################################################################################################

 Building procedure:

 -	Maven is used
 -	There is a Maven profile for each environment within the root directory of the cashout-grid project (e.g. local, finbet-dev, dev, qa, ï¿½)
 -	When an environment profile is specified from the previous point then building procedure uses properties from file: {profileName}.properties to inject into other file that is packaged within the application and also used by the application
 -	The respective properties file contains the application parameters
 ################################################################################################################################


 Installation procedure:
-	(Prerequisite) The building procedure for this Coherence component is developed by complying with the layout of Coherence cluster as described here: http://confluence.gvcgroup.local/display/DevOps/Coherence+boxes+folders+layout
	There are two directories expected to be on place:
 		1. /opt/envs/${env-name}/session-caching (holding common files and configuration for Coherence cluster)
 		2. /opt/sb-apps/envs/${env-name}/CashOutCoherence - The building procedure makes package with directory layout that have to be placed under this directory. Upon building the project package will be on cashout-grid/target/cashout-grid-package/ path.
 		
-	Configure logging by editing /opt/envs/${env-name}/session-caching/log4j.xml file. Please add the following XML snippets and replace __CASH_OUT_ENTRY_PROCESSOR_LOG_PATH__ with the desired path:
	    <appender name="cashout-entry-processor" class="org.apache.log4j.RollingFileAppender">
	        <param name="file" value="__CASH_OUT_ENTRY_PROCESSOR_LOG_PATH__/CashOutEntryProcessor.log"/>
	        <param name="MaxFileSize" value="512KB"/>
	        <!-- Keep one backup file -->
	        <param name="MaxBackupIndex" value="1"/>
	        <layout class="org.apache.log4j.PatternLayout">
	            <param name="ConversionPattern" value="%d %5p %c{1} - %m%n"/>
	        </layout>
	    </appender>
	    <logger name="com.sportingbet.cashout" additivity="false">
	        <level value="DEBUG"/>
	        <appender-ref ref="cashout-entry-processor"/>
	    </logger>		
 		
-	There is no any custom grid properties file for the Cashout Grid application.

-	The Coherence POF descriptor for CashOut data is defined within cashout-data-pof-config.xml file
	(retrieve from artifacts preserved in Anthill under version release_1.0.0, hint URL (from Finbet): http://b33w3x32p4proxy.finbet.com:8080/view/Java/job/CashOut_Main/ws/cashout-grid/target/cashout-grid-package/).
	Include reference to cashout-data-pof-config.xml in /opt/envs/${env-name}/session-caching/sbet-pof-config.xml file by adding <include/> tag as given bellow:
	<user-type-list>
		...
		<include>cashout-data-pof-config.xml</include>
		...
	</user-type-list>

-	The Coherence configuration file (/opt/envs/${env-name}/session-caching/coherence-cache-config.xml) has to contain the following elements:
    <caching-scheme-mapping>
        <cache-mapping>
            <cache-name>${env-name}/cashout-data/CustomerCashOut</cache-name>
            <scheme-name>cashout-distributed-scheme</scheme-name>
        </cache-mapping>
    </caching-scheme-mapping>

    <caching-schemes>
		
		<!-- CashOut Cache Scheme -->
		<distributed-scheme>
			<scheme-name>cashout-distributed-scheme</scheme-name>
			<service-name>cashout-distributed-scheme</service-name>
			<backing-map-scheme>
				<local-scheme>
					<scheme-ref>limited-distributed-scheme</scheme-ref>					
				</local-scheme>
			</backing-map-scheme>
			<autostart>true</autostart>
		</distributed-scheme>		
		
		<!-- Default limited cache scheme -->
		<local-scheme>
			<scheme-name>limited-distributed-scheme</scheme-name>
			<eviction-policy>HYBRID</eviction-policy>
			<high-units>{back-size-limit 524288000}</high-units> <!--500MB -->
			<unit-calculator>BINARY</unit-calculator>
			<expiry-delay>{entry-expiry 0}</expiry-delay>			
		</local-scheme>
		
    </caching-schemes>

